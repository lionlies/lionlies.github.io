<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="rails developer, entrepreneur">
<meta property="og:type" content="website">
<meta property="og:title" content="jason's blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="jason's blog">
<meta property="og:description" content="rails developer, entrepreneur">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jason's blog">
<meta name="twitter:description" content="rails developer, entrepreneur">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    }
  };
</script>





  <title> jason's blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">jason's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">rails and js notes</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/20/如何顯示-Disqus-的-Comment-Count/" itemprop="url">
                  如何顯示 Disqus 的 Comment Count?
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-20T15:28:50+08:00" content="2016-09-20">
              2016-09-20
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/20/如何顯示-Disqus-的-Comment-Count/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/20/如何顯示-Disqus-的-Comment-Count/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://help.disqus.com/customer/portal/articles/565624-adding-comment-count-links-to-your-home-page" target="_blank" rel="external">https://help.disqus.com/customer/portal/articles/565624-adding-comment-count-links-to-your-home-page</a></p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;span class="button"&gt;</div><div class="line">  &lt;i class="fa fa-comment-o" aria-hidden="true"&gt;&lt;/i&gt;</div><div class="line">  &lt;a href="&lt;%=<span class="ruby"> url_for([idea, &#123;<span class="symbol">only_path:</span> <span class="literal">false</span>&#125;]) </span>%&gt;#disqus_thread"&gt;&lt;/a&gt;</div><div class="line">&lt;/span&gt;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/如何把-Bootstrap-內容置中？/" itemprop="url">
                  如何把 Bootstrap 內容置中？
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:49:40+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/如何把-Bootstrap-內容置中？/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/如何把-Bootstrap-內容置中？/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Offsetting-columns"><a href="#Offsetting-columns" class="headerlink" title="Offsetting columns"></a>Offsetting columns</h3><p><a href="http://getbootstrap.com/css/#grid-offsetting" target="_blank" rel="external">http://getbootstrap.com/css/#grid-offsetting</a></p>
<blockquote>
<p>Move columns to the right using .col-md-offset-<em> classes. These classes increase the left margin of a column by </em> columns. For example, .col-md-offset-4 moves .col-md-4 over four columns.</p>
</blockquote>
<p>這是一個 view template 中常見的 Bootstrap Grid System 起手式</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div class="container col-md-8 col-md-offset-2"&gt;</div></pre></td></tr></table></figure>
<p>使用 Bootstrap Grid 要給一個 container 標籤，所以我們下 <code>class=&quot;container&quot;</code>; Grid system 總共 12 columns, <code>col-md-8</code> 佔了 8 columns, <code>col-md-offset-2</code> 則是將 <code>col-md</code> 往右推 2 columns.</p>
<p>所以如果要將內容置中，也就是左右對稱，就用簡單的數學算一下，12 - 8 = 4, 4/2 = 2, 所以加上 <code>col-md-offset-2</code> 就能讓內容置中了。</p>
<p>如果是 <code>col-xs-8</code>, 就要用 <code>col-xs-offset-*</code> 來推，所以也可能有 <code>col-md-6 col-xs-8 col-md-offset-3 col-xs-offset-2</code> 的設定。</p>
<p><a href="http://stackoverflow.com/questions/18153234/center-a-column-using-twitter-bootstrap-3" target="_blank" rel="external">http://stackoverflow.com/questions/18153234/center-a-column-using-twitter-bootstrap-3</a><br><a href="http://getbootstrap.com/css/#grid-offsetting" target="_blank" rel="external">http://getbootstrap.com/css/#grid-offsetting</a><br><a href="https://getbootstrap.com/examples/grid/" target="_blank" rel="external">https://getbootstrap.com/examples/grid/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Add-Icon-Bars-for-Responsive-Collapsing-Navbar-Using-Bootstrap-3/" itemprop="url">
                  Add Icon-Bars for Responsive Collapsing Navbar Using Bootstrap 3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:47:48+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Add-Icon-Bars-for-Responsive-Collapsing-Navbar-Using-Bootstrap-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Add-Icon-Bars-for-Responsive-Collapsing-Navbar-Using-Bootstrap-3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先加入 bootstrap 資源</p>
<p>接著在 <code>_navbar.html.erb</code> 仿造下方的結構：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;nav class="navbar navbar-default navbar-fixed-top"&gt;</div><div class="line">  &lt;div class="container-fluid"&gt;</div><div class="line"></div><div class="line">    &lt;div class="navbar-brand" href = "/"&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;button class = "navbar-toggle" data-toggle = "collapse" data-target = ".navHeaderCollapse"&gt;</div><div class="line">      &lt;span class="icon-bar"&gt;&lt;/span&gt;</div><div class="line">      &lt;span class="icon-bar"&gt;&lt;/span&gt;</div><div class="line">      &lt;span class="icon-bar"&gt;&lt;/span&gt;</div><div class="line">    &lt;/button&gt;</div><div class="line"></div><div class="line">    &lt;!--</div><div class="line">    1. 一行 &lt;span class="icon-bar"&gt;&lt;/span&gt; 就是一條橫槓，三行就是三條</div><div class="line">    2. 上面 &lt;button&gt; 中的 data-target=".navHeaderCollapse" 指向下面 &lt;div&gt; 中的 navHeaderCollapse</div><div class="line"></div><div class="line">    --&gt;</div><div class="line"></div><div class="line">    &lt;div class = "collapse navbar-collapse navHeaderCollapse"&gt;</div><div class="line"></div><div class="line">      &lt;ul class="nav navbar-nav"&gt;</div><div class="line">        &lt;li&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line"></div><div class="line">      &lt;ul class="nav navbar-nav navbar-right"&gt;</div><div class="line">        &lt;li&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line"></div><div class="line">    &lt;/div&gt;</div><div class="line"></div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/nav&gt;</div></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://www.youtube.com/watch?v=qpWlaOeGZ_4" target="_blank" rel="external">https://www.youtube.com/watch?v=qpWlaOeGZ_4</a></p>
<p>延伸閱讀：<br><a href="http://v4-alpha.getbootstrap.com/components/navbar/#collapsible-content" target="_blank" rel="external">http://v4-alpha.getbootstrap.com/components/navbar/#collapsible-content</a><br><a href="http://www.w3schools.com/bootstrap/bootstrap_collapse.asp" target="_blank" rel="external">http://www.w3schools.com/bootstrap/bootstrap_collapse.asp</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/避免-fixed-navbar-遮住-anchor-point/" itemprop="url">
                  避免 fixed navbar 遮住 anchor point
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:46:37+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/避免-fixed-navbar-遮住-anchor-point/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/避免-fixed-navbar-遮住-anchor-point/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>常見的一種網站設計是在 navbar 或是 sidebar 會有連結或按鈕，點了就跳到頁面中的特定位置，這個特定位置就是 anchor point, 網址通常會長成 <code>www.example.com/#anchor_point</code></p>
<p>通常我們會把 anchor point 設在某個內容區塊的標題，比如 <code>&lt;h5 id=&quot;my_work&quot;&gt;My Work&lt;/h5&gt;</code>, 這樣跳過去特定位置時就直接從標題開始看。</p>
<p>但這樣的設計假如搭配 fixed navbar, 標題就可能在跳到特定位置時被 navbar 遮住。</p>
<p>要怎麼解決呢？很簡單，只要透過 CSS 給 anchor point 一個 padding-top 的值產生推擠效果就可以了。</p>
<p><code>&lt;h5 id=&quot;my_work&quot; class=&quot;anchor&quot;&gt;My Work&lt;/h5&gt;</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.anchor</span> &#123; <span class="attribute">padding-top</span>: <span class="number">65px</span>; &#125;</div></pre></td></tr></table></figure>
<p>關於本文的解法：<br><a href="https://css-tricks.com/forums/topic/using-an-anchor-tag-on-a-web-page-with-a-navigation-bar-set-as-positon-fixed/" target="_blank" rel="external">https://css-tricks.com/forums/topic/using-an-anchor-tag-on-a-web-page-with-a-navigation-bar-set-as-positon-fixed/</a><br><a href="http://stackoverflow.com/questions/4086107/html-positionfixed-page-header-and-in-page-anchors" target="_blank" rel="external">http://stackoverflow.com/questions/4086107/html-positionfixed-page-header-and-in-page-anchors</a></p>
<p>一個 tag 可以同時有一個 id 和多個 classes<br><a href="http://stackoverflow.com/questions/2813653/can-an-element-have-both-an-id-and-a-class" target="_blank" rel="external">http://stackoverflow.com/questions/2813653/can-an-element-have-both-an-id-and-a-class</a><br><a href="http://stackoverflow.com/questions/4371733/can-i-use-div-class-and-id-together-in-css" target="_blank" rel="external">http://stackoverflow.com/questions/4371733/can-i-use-div-class-and-id-together-in-css</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Voting-System/" itemprop="url">
                  Voting System
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:45:29+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Voting-System/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Voting-System/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>假設我們今天有一個網站，上面有 pins, 有 users, users 可以對 pins 投票，但每個 user 只能對每個 pin 投一個 upvote, 並且可以取消 upvote, 這個機制要怎麼設計呢？</p>
<p>首先，我們需要一個 Vote model, 而它是做為 join model 來連結 users 和 pins, 或者說，紀錄哪一位 user 投過哪一個 pin.</p>
<p><code>$ rails g model vote user_id: integer pin_id: integer</code><br><code>$ rake db:migrate</code></p>
<p>接著，我們要來建立各個資料庫之間的關聯：</p>
<p><code>models/pin.rb</code></p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pin</span> &lt; ActiveRecord::Base</span></div><div class="line"></div><div class="line">  has_many <span class="symbol">:votes</span>, <span class="symbol">dependent:</span> <span class="symbol">:destroy</span></div><div class="line">  has_many <span class="symbol">:upvoted_users</span>, <span class="symbol">through:</span> <span class="symbol">:votes</span>, <span class="symbol">source:</span> <span class="symbol">:user</span></div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><code>models/user.rb</code></p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> &lt; ActiveRecord::Base</span></div><div class="line"></div><div class="line">  has_many <span class="symbol">:votes</span>, <span class="symbol">dependent:</span> <span class="symbol">:destroy</span></div><div class="line">  has_many <span class="symbol">:upvoted_pins</span>, <span class="symbol">through:</span> <span class="symbol">:votes</span>, <span class="symbol">source:</span> <span class="symbol">:pin</span></div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><code>model/vote.rb</code></p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vote</span> &lt; ActiveRecord::Base</span></div><div class="line"></div><div class="line">  belongs_to <span class="symbol">:user</span></div><div class="line">  belongs_to <span class="symbol">:pin</span></div><div class="line">  validates_uniqueness_of <span class="symbol">:pin_id</span>, <span class="symbol">scope:</span> <span class="symbol">:user_id</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>最後，我們在 controller 裡面寫上 actions.</p>
<p><code>controllers/ideas_controller.rb</code></p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">upvote</span></span></div><div class="line">  @pin = Pin.find(params[<span class="symbol">:id</span>])</div><div class="line">  @pin.votes.create(<span class="symbol">user_id:</span> current_user.id)</div><div class="line"></div><div class="line">  <span class="keyword">if</span> @pin.save</div><div class="line">    flash[<span class="symbol">:notice</span>] =  <span class="string">"Thank you for upvoting!"</span></div><div class="line">    redirect_to <span class="symbol">:back</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    flash[<span class="symbol">:notice</span>] =  <span class="string">"You have already upvoted this!"</span></div><div class="line">    redirect_to <span class="symbol">:back</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cancel_upvote</span></span></div><div class="line">  @pin = Pin.find(params[<span class="symbol">:id</span>])</div><div class="line">  @vote = Vote.find_by(<span class="symbol">user_id:</span> current_user.id, <span class="symbol">pin_id:</span> @pin.id)</div><div class="line"></div><div class="line">  <span class="keyword">if</span> @vote</div><div class="line">    @vote.destroy</div><div class="line">    flash[<span class="symbol">:notice</span>] = <span class="string">"You've cancelled your upvote."</span></div><div class="line">    redirect_to <span class="symbol">:back</span></div><div class="line">  <span class="keyword">else</span></div><div class="line">    flash[<span class="symbol">:warning</span>] = <span class="string">"You have no upvotes to cancel."</span></div><div class="line">    redirect_to <span class="symbol">:back</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>這樣，我們就完成了這個投票機制。</p>
<p>也可以用同樣的概念讓每一個 user 可以對每一個 pin 投下一個 downvote, 並且也可以取消 downvote.</p>
<p><a href="http://stackoverflow.com/questions/24596651/rails-allow-users-to-upvote-only-once-a-pin" target="_blank" rel="external">http://stackoverflow.com/questions/24596651/rails-allow-users-to-upvote-only-once-a-pin</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Rails-app-編輯-Disqus-Recommended-Configuration-Variables/" itemprop="url">
                  Rails app 編輯 Disqus Recommended Configuration Variables
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:37:39+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Rails-app-編輯-Disqus-Recommended-Configuration-Variables/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Rails-app-編輯-Disqus-Recommended-Configuration-Variables/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>接完 Disqus 後，官方建議編輯 Recommended Configuration Variables 來讓 Disqus 認得出各則留言分別是在哪個網站的哪個頁面底下留的言，將來 Disqus 要傳 comments 過來才不會出錯。</p>
<p>首先，我們看這篇：<br><a href="https://help.disqus.com/customer/en/portal/articles/2158629" target="_blank" rel="external">https://help.disqus.com/customer/en/portal/articles/2158629</a></p>
<p>細部設定則看這篇：<br><a href="https://help.disqus.com/customer/en/portal/articles/472098-javascript-configuration-variables" target="_blank" rel="external">https://help.disqus.com/customer/en/portal/articles/472098-javascript-configuration-variables</a></p>
<p>以下是我的設定</p>
<p><code>_disqus.html.erb</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">......</div><div class="line"></div><div class="line">var disqus_config = function () &#123;</div><div class="line">    this.page.url = &quot;&lt;%= url_for([@post, &#123;only_path: false&#125;]) %&gt;&quot;;</div><div class="line">    this.page.identifier = &quot;&lt;%= @post.id %&gt;&quot;;</div><div class="line">    this.page.title = &quot;&lt;%= @post.title %&gt;&quot;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">......</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Rails-app-接-Disqus/" itemprop="url">
                  Rails app 接 Disqus
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:36:45+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Rails-app-接-Disqus/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Rails-app-接-Disqus/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Rails 要接 Disqus 很簡單，因為它是透過內嵌一段 JS 碼，而不是直接做在 Rails 上：</p>
<p>以一般常見的 blog 系統為例，有 posts, comments:</p>
<ol>
<li>在 Disqus 註冊一個 Disqus 帳號</li>
<li>從 Disqus 的 Admin Panel 那邊選 Installing</li>
<li>在 Installation 頁面，選 Universal Code.</li>
<li>在 app/views/posts 底下新增一個 <code>_disqus.html.erb</code> partial</li>
<li>把 Disqus 留言板的 universal code 貼到 disqus partial 中，並 render 在你的 app 中想產生留言板的地方。我只有 posts#show 的地方會在該 post 底下有留言版，所以在 posts/show.html.erb 的最下方 render disqus partial.</li>
<li>刷新網頁就會看到該 post 底下已經出現 Disqus 留言板了。</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/用-Regexp-找出包含的字串/" itemprop="url">
                  用 Regexp 找出包含的字串
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:35:02+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/用-Regexp-找出包含的字串/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/用-Regexp-找出包含的字串/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_in</span><span class="params">(word)</span></span></div><div class="line">  <span class="keyword">if</span> /lab/ =~ word</div><div class="line">    puts word</div><div class="line">  <span class="keyword">else</span></div><div class="line">    puts <span class="string">"No match"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ul>
<li>上面這method可找出包含 “lab” 的 word</li>
<li>/lab/ =~ word 可寫成 word =~ /lab/</li>
<li>/lab/i 的 i 代表 case-insensitive, 所以包含 “Lab”, “laB” ……等的 word 也會找出來。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Common-Git-Commands/" itemprop="url">
                  Common Git Commands
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T21:34:11+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Common-Git-Commands/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Common-Git-Commands/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基本的可以參考這篇"><a href="#基本的可以參考這篇" class="headerlink" title="基本的可以參考這篇"></a>基本的可以參考這篇</h1><p><a href="https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html" target="_blank" rel="external">https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html</a></p>
<p><br></p>
<h1 id="我常用的"><a href="#我常用的" class="headerlink" title="我常用的"></a>我常用的</h1><p>git init</p>
<p>git add</p>
<p>git commit -m “message”</p>
<p>git commit -am “message”</p>
<p>git commit -a -m “message”</p>
<p>git push origin master</p>
<p>git push heroku master</p>
<p>git remote add origin <code>&lt;server&gt;</code></p>
<p>git remote -v</p>
<p>git branch</p>
<p>git checkout -b <code>&lt;branchname&gt;</code></p>
<p>git branch -d</p>
<p>git merge <code>&lt;branchname&gt;</code></p>
<p>git status</p>
<p>git reset –soft</p>
<p>git reset –hard</p>
<p>git log</p>
<p>git log –graph –oneline</p>
<h1 id="有待了解"><a href="#有待了解" class="headerlink" title="有待了解"></a>有待了解</h1><p>git commiit –amend</p>
<p>git clone</p>
<p>git pull</p>
<h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><p><a href="https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html" target="_blank" rel="external">https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html</a><br><a href="https://gist.github.com/hofmannsven/6814451" target="_blank" rel="external">https://gist.github.com/hofmannsven/6814451</a><br><a href="http://zeroturnaround.com/rebellabs/git-commands-and-best-practices-cheat-sheet/" target="_blank" rel="external">http://zeroturnaround.com/rebellabs/git-commands-and-best-practices-cheat-sheet/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/Build-a-Favoriting-System-with-Rails-Polymorphic-Associations/" itemprop="url">
                  Build a Favoriting System with Rails Polymorphic Associations
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-19T19:54:37+08:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/Build-a-Favoriting-System-with-Rails-Polymorphic-Associations/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/Build-a-Favoriting-System-with-Rails-Polymorphic-Associations/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>這一篇講得很清楚<br><a href="http://schmidt-happens.com/articles/2014/06/04/favoriting-system-in-rails.html" target="_blank" rel="external">http://schmidt-happens.com/articles/2014/06/04/favoriting-system-in-rails.html</a><br>這一篇是上面那篇文章底下留言提到的 gist<br><a href="https://gist.github.com/tschmidt/3c869f17f4f23ab14fe1" target="_blank" rel="external">https://gist.github.com/tschmidt/3c869f17f4f23ab14fe1</a></p>
<p>launchschool 的教材也寫得很清楚<br><a href="https://launchschool.com/blog/understanding-polymorphic-associations-in-rails" target="_blank" rel="external">https://launchschool.com/blog/understanding-polymorphic-associations-in-rails</a></p>
<p><a href="http://railscasts.com/episodes/154-polymorphic-association" target="_blank" rel="external">http://railscasts.com/episodes/154-polymorphic-association</a></p>
<p><a href="https://www.railstutorial.org/book/following_users" target="_blank" rel="external">https://www.railstutorial.org/book/following_users</a></p>
<p><a href="http://6ftdan.com/allyourdev/2015/02/10/rails-polymorphic-models/" target="_blank" rel="external">http://6ftdan.com/allyourdev/2015/02/10/rails-polymorphic-models/</a></p>
<p><a href="http://karimbutt.github.io/blog/2015/01/03/step-by-step-guide-to-polymorphic-associations-in-rails/" target="_blank" rel="external">http://karimbutt.github.io/blog/2015/01/03/step-by-step-guide-to-polymorphic-associations-in-rails/</a></p>
<p><a href="http://stackoverflow.com/questions/24596651/rails-allow-users-to-upvote-only-once-a-pin" target="_blank" rel="external">http://stackoverflow.com/questions/24596651/rails-allow-users-to-upvote-only-once-a-pin</a></p>
<p><a href="http://stackoverflow.com/questions/15866572/rails-implementing-voting-system-that-only-allows-1-upvote-downvote-per-user" target="_blank" rel="external">http://stackoverflow.com/questions/15866572/rails-implementing-voting-system-that-only-allows-1-upvote-downvote-per-user</a></p>
<p><a href="http://codereview.stackexchange.com/questions/8312/refactoring-to-a-polymorphic-association" target="_blank" rel="external">http://codereview.stackexchange.com/questions/8312/refactoring-to-a-polymorphic-association</a></p>
<p><a href="http://stackoverflow.com/questions/21817019/rails-polymorphic-favorites-user-can-favorite-different-models" target="_blank" rel="external">http://stackoverflow.com/questions/21817019/rails-polymorphic-favorites-user-can-favorite-different-models</a></p>
<p><a href="http://www.trevordjones.com/creating-favorites-in-rails/" target="_blank" rel="external">http://www.trevordjones.com/creating-favorites-in-rails/</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Jason Lung" />
          <p class="site-author-name" itemprop="name">Jason Lung</p>
          <p class="site-description motion-element" itemprop="description">rails developer, entrepreneur</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">50</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lionlies" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://facebook.com/lionlies" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  Facebook
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Lung</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'hexo-github-pages-lionlies';
      var disqus_identifier = 'page/2/index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  

  

  

  


</body>
</html>
